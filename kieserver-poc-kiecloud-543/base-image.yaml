schema_version: 1

name: "base-rhpam-kieserver-rhel8"
description: "Base image for building Red Hat Process Automation Manager Kie Server 7.12 container image"
version: "7.12.0"
from: "registry.redhat.io/ubi8/ubi-minimal:latest"

ports:
  - value: 8080
  - value: 8443
#  - value: 8778
modules:
  repositories:
    - name: cct_module
      git:
        url: https://github.com/jboss-openshift/cct_module.git
        ref: 0.39.x
#    - name: jboss-eap-modules
#      git:
#        url: https://github.com/jboss-container-images/jboss-eap-modules.git
#        ref: 7.3.x
    - name: jboss-eap-7-image
      git:
        url: https://github.com/jboss-container-images/jboss-eap-7-image.git
        ref: eap73-dev
#    - name: wildfly-cekit-modules
#      git:
#        url: https://github.com/wildfly/wildfly-cekit-modules.git
#        ref: 0.18.x
    - name: rhpam-7-image
      git:
        url: https://github.com/jboss-container-images/rhpam-7-image.git
        ref: main
#    - name: jboss-kie-modules
#      git:
#        url: https://github.com/jboss-container-images/jboss-kie-modules.git
#        ref: main
  install:
    - name: jboss.container.user
    - name: jboss.kie.common.dependencies
    - name: jboss.container.openjdk.jdk
      version: "11"
    - name: dynamic-resources
    - name: eap-73-latest
      version: "7.3-latest"
    - name: jboss.container.eap.setup
    - name: rhpam-7-kieserver
    - name: jboss.container.maven.36.bash
      version: "3.6"
    - name: jboss.container.maven.default.bash
    - name: jboss.container.eap.s2i.bash
#    - name: jboss.container.jolokia.bash
#    - name: jboss.eap.cd.jolokia
#    - name: os-eap7-openshift
#      version: "1.0-kie"
    - name: jboss.eap.config.openshift
      version: "EAP7.3.0-kie"
    - name: os-eap-activemq-rar
      version: "1.1"
#    - name: os-eap-launch
#      version: "1.0-kie"
#    - name: os-eap7-launch
#      version: "1.0-kie"
    - name: jboss-kie-db-drivers
#    - name: jboss.container.wildfly.launch.messaging
#    - name: jboss.container.wildfly.launch.json-logging
#    - name: jboss.container.wildfly.launch.mp-config
#    - name: jboss.container.wildfly.launch-config.config
#    - name: jboss.container.wildfly.launch-config.os
#    - name: jboss.container.wildfly.launch.jgroups
#    - name: jboss.container.wildfly.launch.elytron
#    - name: jboss.container.wildfly.launch.keycloak
#    - name: jboss.container.wildfly.launch.tracing
    - name: os-eap7-sso-adapters
      version: "7.4.5-kie"
#    - name: jboss.container.wildfly.launch.deployment-scanner
#    - name: jboss.container.wildfly.launch.extensions
#    - name: openshift-layer
#    - name: openshift-passwd
    - name: jboss.container.util.logging.bash
#    - name: jboss.container.eap.prometheus.config
#      version: "7.2-kie"
#    - name: os-eap-txnrecovery.run
#      version: "python3"
    - name: os-eap-python
      version: "3.6"
#    - name: jboss-kie-common
#    - name: jboss-kie-wildfly-common
#    - name: jboss-kie-kieserver
packages:
  content_sets_file: content_sets.yml
  manager: microdnf
osbs:
  configuration:
    container_file: container.yaml
  extra_dir: osbs-extra
  repository:
    name: containers/rhpam-7-kieserver
    branch: rhba-7-rhel-8
run:
  user: 185
  cmd:
    - "/opt/eap/bin/openshift-launch.sh"
